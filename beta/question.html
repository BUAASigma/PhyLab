<html>

<head>
    <title>GetQuestion</title>
</head>

<body>

    <div id="question">
        <p qid="0">题目题目题目题目</p>
    </div>
    <div id="options">
        <li>
            <input type="radio" name="option" value="A">A. </li>
        <li>
            <input type="radio" name="option" value="B" checked>B. </li>
        <li>
            <input type="radio" name="option" value="C">C. </li>
        <li>
            <input type="radio" name="option" value="D">D. </li>
    </div>
    <div id="result"></div>
    <div id="testMath">${}$
        <div id="math1"></div>
    </div>
    <button type="button" onclick="alterQuestion(r)">更换题目</button>
    <button type="button" onclick="checkAnswer()">检查答案</button>
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [["$","$"],["\\(","\\)"]]
    }
  });
</script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
    <script type="text/javascript">
        var r =
            {
                qid: 0,
                question: "123123123123",
                options: { "A": "hello", "B": "yo", "C": "greetings" },
                type: ""
            };

        function getQuestion() {
            var getQuestionUrl = "";
            var result;
            $.ajax(
                {
                    url: getQuestionUrl,
                    type: "get",
                    data: {},
                    success: function (re) {
                        result = re;
                    }
                }
            );
            return result;
        }

        function alterQuestion(quest) {
            $("#question p").text(quest.question).attr("qid", quest.qid);
            $("#options").empty();
            var a = "<li><input type = \"radio\" name = \"option\" value = \"";
            var b = "\">"
            var c = "</li>"
            for (op in quest.options) {
                $("#options").append(a + op + b + quest.options[op] + c);
            }
        }

        function checkAnswer() {
            var checkAnswerUrl = "";
            var ans = $("#options :radio:checked");
            if (ans.length == 0) {
                console.log("must select one");
                return;
            }
            ans = ans[0].value;
            var response;
            response = new Object();
            response.right = 0;
            // console.log(ans);
            // $.ajax(
            //     {
            //         url: checkAnswerUrl,
            //         type: "get",
            //         data: { "qid": 0, "answer": ans },
            //         success: function (re) {
            //             response = re;
            //         }
            //     }
            // );
            if (response.right == 1)
                $("#result").text("正确");
            else
                $("#result").text("错误");

        }
        function getAnswer() {
            var getAnswerUrl = "";
            var qid = $("#question p").attr("qid");
            var response;
            $.ajax(
                {
                    url: getAnswerUrl,
                    type: "get",
                    data: { "qid": qid },
                    success: function (re) { response = re; }
                }
            );
            return response;
        }

        function display(tex) {
            var QUEUE = MathJax.Hub.queue;  // shorthand for the queue
            var math = null;                // the element jax for the math output.

            QUEUE.Push(function () {
                math = MathJax.Hub.getAllJax("testMath")[0];
            });
            QUEUE.Push(["Text", math, tex]);

        }


    </script>


</body>

</html>