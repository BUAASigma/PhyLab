#物理实验Python脚本编写规范(光学部分)#
##一、	概述##
　　物理实验Python脚本对于输入的原始数据进行处理，并结合LaTex模板返回完整的LaTex文件。每一个脚本与对应的lex文档对应一个独立的小实验，例如1080114。由于实验数据处理过程相似，因此将脚本程序的编写形成一套流程，对程序的结构，变量定义进行约束以及提取功能函数，以便代码优化以及其余脚本的快速开发。
##二、	开发环境##
　　实验数据处理脚本用Python2.7(python 2.7.12)开发，实验报告模板用LaTex开发。相关包依赖将在下文程序结构中说明。编码方式为UTF-8。
##三、	程序结构##
###1.	包依赖###
　　程序对于Python中包的依赖包括：
* math  

  功能：进行基本的数学运算，提供基本的数学常数
* jinja2 

  功能：基于python的模板引擎，这里用于构建实验报告模板并将结果数据填入模板。<br />
  安装方式：pip安装<br />
  相关教程： http ://docs.jinkan.org/docs/jinja2/

* xml

  功能：在测试程序中用于读取文件
  
###2.	变量及函数命名规则###
####1)	全局变量命名####
　　程序主要利用全局变量进行传值，全局变量分为三部分：原始数据、处理数据、填写数据，其中原始数据为获取的实验原始数据，为数字类型(整数、浮点数)；处理数据为实验处理得到的最终结果及中间过程的数据，为数字类型；填写数据为处理数据经过位数约化得到的字符串变量(包括列表)。下面对于不同类型变量命名规则进行说明：
#####a)	原始数据及处理数据规则：#####
　　变量名以小写字母开头，除描述大写命名的对象，如角A时，变量名中不得出现大写字母。对于变量含义的扩充，通过增加前缀 *_ 与后缀  _* 来实现(类匈牙利命名法)。前缀描述变量含义，后缀描述变量单位，例如 average_delta_r 前缀average_描述该变量为delta的平均值，_r表示该变量以弧度rad作为单位。
#####b)	填写数据规则：#####
　　变量名全大写，为对应处理数据的全大写表示。前缀后缀定义同原始数据及处理数据规则。
#####c)	公共规则：#####
　　前缀含义：<br />
　　angle_  （可为大写） 角<br />
　　average_  平均值<br />
　　u_   不确定度<br />
　　ua_  A类不确定度<br />
　　ub_  B类不确定度<br />
　　re_  相对不确定度<br />

　　后缀含义：
　　_a  以角度值作为单位<br />
　　_r  以弧度rad作为单位<br />
　　_mm 以毫米作为单位<br />
　　_nm 以纳米作为单位<br />
　　在不产生歧义的情况下可自定义前缀与后缀。<br />

####2)	局部变量命名####
　　局部变量命名要求变量名以小写字母开头，除描述大写命名的对象，如角A时，变量名中不得出现大写字母，不得与全局变量与函数重名。
####3)	函数命名####
　　对于主要的函数，已给出命名，由于历史原因，个别主要函数命名较为混乱。对于其他函数命名，要求不得出现大写字母。
###3.	主要函数###
* handler(xml):<br />
功能：程序入口函数，顶层总控调用对应子实验的handle函数获取实验数据结果<br />
输入：已读入的xml文件<br />
输出：对应实验的已完成填值的lex文本，以string返回值的形式返回<br />

* xmlReader(xml):<br />
功能：将输入的xml文件中的数据按照规定提取并为设定的全局变量赋值<br />
输入：已读入的xml文件<br />
输出：无返回值，通过全局变量传值<br />

* niconiconi(): # 不要在意命名<br />
功能：数据处理功能函数，对原始数据进行处理，得到每一步的计算结果<br />
输入：无参数，通过全局变量传值<br />
输出：无参数，通过全局变量传值<br />

* regulation():<br />
功能：将处理过的数据转化成表达形式符合要求的字符串<br />
输入：无参数，通过全局变量传值<br />
输出：无参数，通过全局变量传值<br />

* LatexFiller(latex_address):<br />
功能：将数据填入模板，返回完整的文本<br />
输入：lex模板文本 # latex_address命名存在歧义<br />
输出：填入数据的完整的lex文本<br />

###4.	其他功能函数###
* Ua(x, aver, k):<br />
功能：求a类不确定度<br />
输入：x为数据列表，aver为平均数，k为数据个数<br />
输出：返回a类不确定度数值<br />

* bitAdapt(x, u_x, up, low):<br />
功能：对于求出的真值极其不确定度，将其进行位数限定、对其，得到符合要求的形式<br />
输入：x为求出的期望真值，u_x为求出的不确定度，up,down为幂值，表示对误差上下限的约定，10^up为误差上限，10^down为误差下限<br />
输出：若u_x > 10^up，则打印错误“误差过大”，并返回；<br />
　　　若u_x < 10^down，则打印错误“误差过小”，并返回；<br />
　　　在u_x满足条件的前提下，u_x最高位有限数字为小数部分时，赋值<br />
　　　　result[0]为真值最终表达字符串，<br />
　　　　result[1]为不确定度最终表达字符串。<br />
　　　在u_x满足条件的前提下，u_x最高位有限数字为整数部分时，赋值<br />
	　　　（下面描述比较反人类，直接看实例即可）<br />
　　　　result[1]为不确定度最高位有效数字 <br />
　　　　result[0]为对应不确定度最高位有效数字之前有效数字部分<br />
　　　　result[2]为不确定苏及真值的幂<br />
　　　（最终答案表达形式为：(result[0] +- result[1]) *10 ^result[2] (单位)）<br />
    
* toScience(number):<br />
功能：将输入的数字转化成字符串，有效数字位数为5 # 可根据需要进行修改<br />
输入：数字类型数据，整数或浮点数<br />
输出：4位有效数字表示的字符串<br />

###5.	注释要求###
####程序头部注释：####
#####1)	编码限定：#####
`# -*- coding:utf-8 -*-`
#####2)	实验说明：#####
可以仅简单的指出实验名称及实验内容，如# 1070212测量三棱镜顶角
#####3)	参数说明：#####
``
”””
input:
   param: 
   …
output:
   param:
   …
”””
``
####函数注释：####
使用#在函数上方进行注释
####全局变量注释：####
可自行定义

